(function(){var c;c="undefined"!==typeof exports&&null!==exports?exports:this;c.CalculateRow=function(a,b,f){this.lineNumber=a;this.operator=b;this.values=f.split(",")};c.validateInput=function(a){var b;b=/(\s*\d\s*\#\s*-\s*(\bSUM\b|\bAVERAGE\b|\bMIN\b|\bMAX\b)\s*:(\s*\d+)(,\s*\d+\s*)*)/;return!!a&&b.test(a.toUpperCase())};c.stripWhiteSpaceAndChangeToUpper=function(a){return a.replace(/\s+|s+$/g,"")};c.calculate=function(a,b){switch(a){case "SUM":return b.reduce(function(a,b){return+a+ +b});case "MIN":return Math.min.apply(this,
b);case "MAX":return Math.max.apply(this,b);case "AVERAGE":return Math.round(b.reduce(function(a,b){return a+b})/b.length);default:return-1}};c.buildOutput=function(a,b,c){return""+a+"#:"+b+"="+c};c.splitRow=function(a){var b;b=stripWhiteSpaceAndChangeToUpper(a).split("#-");a=b[0];b=b[1].split(":");return new CalculateRow(a,b[0],b[1])};c.parseRow=function(a){var b;return validateInput(a)?(a=splitRow(a),b=calculate(a.operator,a.values),buildOutput(a.lineNumber,a.operator,b)):"Could not parse. [ "+
a+" ]"};c.parseInputText=function(a){var b;b=a.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/);var c,e,d;d=[];c=0;for(e=b.length;c<e;c++)a=b[c],d.push(parseRow(a));return d.reduce(function(a,b){return a+"\r\n"+b})}}).call(this);
